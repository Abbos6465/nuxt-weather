<script>import {mapActions, mapState} from "vuex";import {getDateInfo, setDate} from "~/utils/helper.js";import AppLoader from "~/components/ui/AppLoader.vue";export default {  components: {AppLoader},  data: () => ({    isLoading: false  }),  computed: {    ...mapState({      forecast: state => state.forecast.forecast    })  },  methods: {    getDateInfo,    ...mapActions({      fetchForecast: "forecast/fetchForecast"    }),    setDate  },  watch: {    $route: {      async handler(newValue) {          this.isLoading = true;          await this.fetchForecast(newValue.query.q ?? "Tashkent").catch(err => {            createError({statusCode: err.response.status, statusMessage: err.message})          }).finally(() => {            this.isLoading = false;          });      }, immediate: true    }  },}</script><template>  <section class="intro-sec">    <div class="container">      <AppLoader v-if="isLoading" />      <div          v-else          class="intro-cards"      >        <div class="intro-card intro-card--small">          <div class="intro-card--small__header">            <div class="intro-card--small__header__wrap">              <h3 class="intro-card--small__title">                {{ forecast?.current?.temp_c ?? '' }}°              </h3>              <h5 class="intro-card--small__subtitle">                Сегодня              </h5>            </div>            <img                :src="forecast?.current?.condition?.icon ?? ''"                alt="weather img"                class="intro-card--small__img"            >          </div>          <div class="intro-card--small__body">            <p class="intro-card--small__text">              Время: {{setDate(forecast?.location?.localtime)}}            </p>            <p class="intro-card--small__text">              Город: {{ forecast?.location?.name }}            </p>          </div>        </div>        <div class="intro-card intro-card--medium">          <ul class="intro-card--medium__list">            <li class="intro-card--medium__list-item">              <div class="intro-card--medium__list-item__content">                <div class="intro-card--medium__list-item__icon-wrap">                  <img                      src="~/assets/images/icons/icon-temp.svg"                      alt="temp icon"                      class="intro-card--medium__list-item__icon"                  />                </div>                <div class="intro-card--medium__list-item__title">                  Температура                </div>              </div>              <div class="intro-card--medium__list-item__text">                {{ forecast?.current?.temp_c ?? '' }}° - ощущается как {{ forecast?.current?.temp_c ?? '' }}°              </div>            </li>            <li class="intro-card--medium__list-item">              <div class="intro-card--medium__list-item__content">                <div class="intro-card--medium__list-item__icon-wrap">                  <img                      src="~/assets/images/icons/icon-pressure.svg"                      alt="temp icon"                      class="intro-card--medium__list-item__icon"                  />                </div>                <div class="intro-card--medium__list-item__title">                  Давление                </div>              </div>              <div class="intro-card--medium__list-item__text">                {{mbToMmHg(forecast?.current?.pressure_mb)}} мм ртутного столба - нормальное              </div>            </li>            <li class="intro-card--medium__list-item">              <div class="intro-card--medium__list-item__content">                <div class="intro-card--medium__list-item__icon-wrap">                  <img                      src="~/assets/images/icons/icon-precipitation.svg"                      alt="temp icon"                      class="intro-card--medium__list-item__icon"                  />                </div>                <div class="intro-card--medium__list-item__title">                  Осадки                </div>              </div>              <div class="intro-card--medium__list-item__text">                Без осадков              </div>            </li>            <li class="intro-card--medium__list-item">              <div class="intro-card--medium__list-item__content">                <div class="intro-card--medium__list-item__icon-wrap">                  <img                      src="~/assets/images/icons/icon-wind.svg"                      alt="temp icon"                      class="intro-card--medium__list-item__icon"                  />                </div>                <div class="intro-card--medium__list-item__title">                  Ветер                </div>              </div>              <div class="intro-card--medium__list-item__text">                {{ kmhToMs(forecast?.current?.wind_kph) }} м/с юго-запад - легкий ветер              </div>            </li>          </ul>        </div>        <div class="intro-card intro-card--large">          <div              v-for="item in forecast?.forecast?.forecastday"              :key="item.date"              class="intro-card__card"          >            <h5 class="intro-card__card-title">              {{ getDateInfo(item.date).weekdayName }}            </h5>            <h6 class="intro-card__card-subtitle">              {{ getDateInfo(item.date).day }} {{ getDateInfo(item.date).monthShortName }}            </h6>            <img                :src="item.day.condition.icon"                alt="weather img"                class="intro-card__card-img"            />            <h5 class="intro-card__card-title">              {{item.day.maxtemp_c}}°            </h5>            <p class="intro-card__card-text">              {{ item.day.mintemp_c }}°            </p>            <p class="intro-card__card-text">              {{ item.day.condition.text }}            </p>          </div>        </div>      </div>    </div>  </section></template><style lang="scss">.intro {  &-cards {    display: flex;    flex-wrap: wrap;    gap: 50px;    @include max-xl{      gap: 40px;    }    @include max-lg{      gap: 30px;    }    @include max-md{      gap: 25px;    }    @include max-sm{      gap: 22px;    }    @include max-xs{      gap: 20px;    }    @include max-xxs{      gap: 18px;    }  }  &-card {    border-radius: $border-20;    box-shadow: 2px 5px 25px -3px #B4B4B440;    background-color: var(--light);    padding: 20px;    @include max-lg{      width: 100% !important;    }    @include max-sm{      padding: 18px;    }    @include max-xs{      padding: 16px;    }    &--small {      width: calc(100% / 3);      &__header{        display: flex;        align-items: center;        justify-content: space-between;      }      &__title{        color: var(--color-blue);        @include font-size(96);        font-weight: 500;        line-height: 117px;        @include max-lg{          @include font-size(80);          line-height: 100px;        }        @include max-sm{          @include font-size(70);          line-height: 85px;        }        @include max-xs{          @include font-size(60);          line-height: 75px;        }        @include max-xxs{          @include font-size(50);          line-height: 60px;        }      }      &__subtitle{        @include font-size(40);        line-height: 48.76px;        @include max-lg{          @include font-size(35);          line-height: 40px;        }        @include max-sm{          @include font-size(30);          line-height: 30px;        }        @include max-xs{          @include font-size(25);          line-height: 25px;        }        @include max-xxs{          @include font-size(22);          line-height: 20px;        }      }      &__body{        margin-top: 31px;        display: flex;        flex-direction: column;        row-gap: 14px;        @include max-lg{          margin-top: 25px;          row-gap: 12px;        }        @include max-sm{          margin-top: 20px;          row-gap: 10px;        }        @include max-xs{          margin-top: 15px;          row-gap: 8px;        }      }      &__text{        @include font-size(25);        line-height: 30px;        color: var(--gray);        @include max-sm{          @include font-size(22);          line-height: 25px;        }        @include max-xs{          @include font-size(20);        }        @include max-xxs{          @include font-size(18);        }      }      &__img{        max-width: 120px;        max-height: 120px;        width: 100%;        height: 100%;        object-fit: contain;        @include max-lg{          max-width: 110px;          max-height: 110px;        }        @include max-sm{          max-width: 95px;          max-height: 95px;        }        @include max-xs{          max-height: 80px;          max-width: 80px;        }        @include max-xxs{          max-width: 65px;          max-height: 65px;        }      }    }    &--medium {      width: calc(200% / 3 - 50px);      padding: 40px 30px;      background: url("~/assets/images/weathers/bg-cloud.png") top right no-repeat;      background-size: auto;      @include max-lg{        padding: 30px 20px;        background-size: 400px;      }      @include max-md{        background-size: 300px;      }      @include max-sm{        background-size: 280px;        padding: 25px 18px;      }      @include max-xs{        padding: 20px 16px;      }      &__list{        display: flex;        flex-direction: column;        row-gap: 24px;        @include max-lg{          row-gap: 20px;        }        @include max-sm{          row-gap: 18px;        }        @include max-xs{          row-gap: 14px;        }        &-item{          @include max-xxs{            align-items: start !important;            flex-direction: column;            row-gap: 10px;          }          &, &__content{            display: flex;            align-items: center;            column-gap: 20px;            @include max-sm{              column-gap: 18px;            }            @include max-xs{              column-gap: 14px;            }          }          &__content{            min-width: 170px;          }          &__icon{            max-width: 25px;            max-height: 25px;            width: fit-content;            object-fit: cover;            &-wrap {              border-radius: 50%;              background-color: var(--light);              box-shadow: 1px 4px 10px -1px #4793FF33;              display: flex;              align-items: center;              justify-content: center;              width: 38px;              height: 38px;            }          }          &__title, &__text{            @include font-size(16);            line-height: 17px;          }          &__title{            color: var(--gray);          }          &__text{            color: var(--dark);          }        }      }    }    &--large {      display: flex;      flex-wrap: wrap;      gap: 20px;      width: 100%;      @include max-md{        gap: 18px;      }      @include max-sm{        gap: 16px;      }      @include max-xs{        gap: 14px;      }    }    &__card{      width: calc((100% - 120px)/7);      padding: 11px;      background-color: #4793FF33;      border-radius: $border-10;      @include max-lg{        width: calc((100% - 60px)/4);        padding: 10px;      }      @include max-md{        width: calc((100% - 36px)/3);      }      @include max-sm{        width: calc((100% - 16px)/2);      }      @include max-xs{        width: calc((100% - 14px)/2);      }      &-title{        font-weight: 500;        @include font-size(18);        line-height: 21px;        color: var(--dark);      }      &-subtitle{        margin-top: 7px;        @include font-size(14);        line-height: 17px;        color: var(--gray);      }      &-img{        width: 48px;        height: 48px;        object-fit: contain;        margin: 12px 0;      }      &-text{        color: var(--gray);        @include font-size(13);        line-height: 15px;        &:not(&:last-child){          margin: 4px 0 6px;        }      }    }  }}</style>